<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Torch Premium</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { background-color: #000; color: white; font-family: sans-serif; margin: 0; overflow: hidden; }
        
        /* Premium Button Style */
        .torch-base {
            background: linear-gradient(145deg, #1a1a1a, #0a0a0a);
            box-shadow: 0 10px 40px rgba(0,0,0,0.8), inset 0 1px 1px rgba(255,255,255,0.05);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* The Premium Light Ignition Effect */
        .torch-active {
            background: #facc15;
            box-shadow: 0 0 80px rgba(250, 204, 21, 0.6), 0 0 20px rgba(250, 204, 21, 0.4);
            transform: scale(1.05);
        }

        /* Breathing Pulse Animation */
        @keyframes breathing {
            0% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.4); opacity: 0.15; }
            100% { transform: scale(1); opacity: 0.3; }
        }
        .pulse-layer {
            animation: breathing 3s infinite ease-in-out;
            pointer-events: none;
        }

        /* Glass Panel for Calculator */
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px); border-top: 1px solid rgba(255, 255, 255, 0.1); }
        .calc-panel { position: fixed; bottom: 0; left: 0; right: 0; transform: translateY(100%); transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1); }
        .calc-panel.open { transform: translateY(0); }
    </style>
</head>
<body>

    <div class="h-screen flex flex-col items-center justify-between p-10">
        <div class="w-full flex justify-between opacity-20 text-[10px] font-bold tracking-[0.4em]">
            <span>LUX CORE v3.0</span>
            <span>POWER STABLE</span>
        </div>

        <div class="relative flex items-center justify-center">
            <div id="pulse1" class="absolute w-72 h-72 bg-yellow-400 rounded-full hidden pulse-layer"></div>
            
            <button id="torchBtn" class="torch-base relative z-10 w-56 h-56 rounded-full flex items-center justify-center border border-white/5 active:scale-90 transition-transform">
                <i data-lucide="power" size="72" id="powerIcon" class="text-neutral-700 transition-colors duration-500"></i>
            </button>
        </div>

        <button id="openCalc" class="p-6 glass rounded-[30px] hover:bg-white/5 active:scale-95 transition-all">
            <i data-lucide="calculator" size="28" class="text-yellow-400"></i>
        </button>
    </div>

    <div id="calcModal" class="calc-panel glass rounded-t-[45px] p-8 pb-12 shadow-2xl">
        <div class="w-12 h-1 bg-white/10 rounded-full mx-auto mb-8"></div>
        <div id="display" class="text-right text-7xl font-light mb-10 h-20 overflow-hidden tracking-tighter">0</div>
        <div class="grid grid-cols-4 gap-4" id="keypad"></div>
        <button id="closeCalc" class="mt-8 w-full py-4 text-white/20 font-bold uppercase text-[10px] tracking-widest">Close Calculator</button>
    </div>

    <script>
        lucide.createIcons();

        let isOn = false;
        let track = null;
        const torchBtn = document.getElementById('torchBtn');
        const pulse1 = document.getElementById('pulse1');
        const powerIcon = document.getElementById('powerIcon');

        // --- Premium Torch Animation & Logic ---
        torchBtn.onclick = async () => {
            if (navigator.vibrate) navigator.vibrate(isOn ? 15 : 45);
            
            try {
                if (isOn) {
                    track.stop();
                    isOn = false;
                    torchBtn.classList.remove('torch-active');
                    pulse1.classList.add('hidden');
                    powerIcon.classList.replace('text-black', 'text-neutral-700');
                } else {
                    const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
                    track = stream.getVideoTracks()[0];
                    await track.applyConstraints({ advanced: [{ torch: true }] });
                    isOn = true;
                    torchBtn.classList.add('torch-active');
                    pulse1.classList.remove('hidden');
                    powerIcon.classList.replace('text-neutral-700', 'text-black');
                }
            } catch (e) { alert("Torch requires camera permissions."); }
        };

        // --- Simple Calculator ---
        const calcModal = document.getElementById('calcModal');
        const display = document.getElementById('display');
        let exp = "";

        document.getElementById('openCalc').onclick = () => calcModal.classList.add('open');
        document.getElementById('closeCalc').onclick = () => calcModal.classList.remove('open');

        const keys = ['C', '÷', '×', '⌫', '7', '8', '9', '-', '4', '5', '6', '+', '1', '2', '3', '=', '0', '.'];
        keys.forEach(key => {
            const btn = document.createElement('button');
            btn.innerText = key;
            btn.className = `h-16 rounded-[24px] text-xl font-medium active:scale-90 transition-all ${key === '=' ? 'bg-yellow-400 text-black' : 'bg-white/5'}`;
            btn.onclick = () => {
                if (key === 'C') exp = "";
                else if (key === '⌫') exp = exp.slice(0, -1);
                else if (key === '=') { try { exp = eval(exp.replace(/×/g, '*').replace(/÷/g, '/')).toString(); } catch { exp = "Error"; } }
                else exp += key;
                display.innerText = exp || "0";
            };
            document.getElementById('keypad').appendChild(btn);
        });
    </script>
</body>
</html>
